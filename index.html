<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the Emoji</title>
    <link rel="stylesheet" href="style/style.css">
    <!-- reCAPTCHA Script -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body>
    <!-- Leaderboard Banner displaying top scores -->
    <div id="leaderboard-banner" class="leaderboard-banner">
        <span id="top-scores-text">Top Scores: Loading...</span>
    </div>

    <!-- MENU STATE: Category Selection -->
    <div id="menu-screen" class="screen">
       <h3><div id="username-display" style="margin-bottom: 15px; font-weight: bold;"></div></h3>
        <h1>Guess the Emoji!</h1>
        <h2>Select a category:</h2>
        <div id="category-buttons">
            <!-- Buttons for selecting different emoji categories -->
            <button class="category-btn" data-category="movies">Movies</button>
            <button class="category-btn" data-category="songs">Songs</button>
            <button class="category-btn" data-category="books">Books</button>
            <button class="category-btn" data-category="tv">TV Shows</button>
            <button class="category-btn" data-category="countries">Countries</button>
            <button class="category-btn" data-category="brands">Brands</button>
        </div>
    </div>

    <!-- LOBBY STATE: Confirm Selection & Start Game -->
    <div id="lobby-screen" class="screen hidden">
        <h2>Category Selected:</h2>
        <h3 id="selected-category">[Category Name]</h3>
        <button id="start-game-btn">Start Game</button>
        <button id="return-menu-btn">Return</button>
        <div id="timer"><h2>‚è≥ Time: 30s</h2></div>
        <div id="score"><h2>‚≠ê Score: 0</h2></div>
    </div>

    <!-- IN-GAME STATE: Active Gameplay -->
    <div id="game-screen" class="screen hidden">
        <div id="emoji-display">üßê‚ùì</div>
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Enter your guess">
            <div id="checkmark" class="hidden">‚úÖ</div>
          </div>
        <button id="submit-btn">Guess</button>
        <button id="hint-btn">Hint</button>
        <button id="exit-game-btn">Exit</button>
        <h3><div id="scoreboard">Score: <span id="game-score">0</span></div></h3>
        <h3><div id="game-timer">Timer: <span id="game-time">30</span>s</div></h3>
    </div>

    <!-- Guesses Icons -->
    <div id="feedback">
        <div id="wrong-attempts">
            <span class="x-icon hidden">‚ùå</span>
            <span class="x-icon hidden">‚ùå</span>
            <span class="x-icon hidden">‚ùå</span>
        </div>
    </div>

    <div id="background-animation"></div>

    <!-- FEEDBACK SECTION  -->
    <div id="feedback-screen" class="screen hidden">
        <h1>Game Over</h1>
        <h2 id="final-score">Final Score: 0</h2>
        <textarea id="feedback-input" placeholder="What do you think about this emoji set?"></textarea>

        <!-- reCAPTCHA Widget -->
        <div class="recaptcha-container"><div class="g-recaptcha" data-sitekey="6LeUhRIrAAAAAFFG7OvoAjVfqGf0VO2EgoIjxln7"></div></div>

        <button id="return-feedback-btn">Return to Menu</button> <!-- Updated ID -->
        <button id="submit-feedback-btn">Submit Feedback</button>
    </div>

    <!-- FULL LEADERBOARD SCREEN -->
    <div id="leaderboard-screen" class="screen hidden">
        <h1>üèÜ Leaderboard</h1>
        <table id="leaderboard-table">
            <thead>
                <tr><th>Player</th><th>Score</th></tr>
            </thead>
            <tbody>
                <!-- Scores will be dynamically inserted here -->
            </tbody>
        </table>
        <button id="return-menu-from-leaderboard">Return to Menu</button>
    </div>

    <canvas></canvas>

    <!-- Firebase App (Compatibility) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <!-- Firebase Firestore (Compatibility) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-analytics-compat.js"></script>
    <script src="js/firebaseInit.js"></script>

    <!-- Running Scripts -->
    <script src="js/stateManager.js"></script> <!-- Must load first -->
    <script src="js/database.js"></script>
    <script src ="js/emojiManager.js"></script>
    <script src="js/script.js"></script>
    <script src="js/gameLogic.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/feedback.js"></script>

</body>

</html>